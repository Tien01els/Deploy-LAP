"use strict";(self.webpackChunktemplate_react_app=self.webpackChunktemplate_react_app||[]).push([[404],{4240:function(e,t,n){n.r(t),n.d(t,{default:function(){return T}});var r=n(4165),s=n(5861),a=n(885),i=n(2791),c=n(4255),l=n(8661),o=n(3458),u=n(4453),p=n(1878),d=n(7338),f=n(1756),x=n(4212),m=n(9959),h=n(4614),v=n(1413),g=n(7948),j=n.n(g),Z=n(1134),N=n(9085),b=n(184),w=(0,x.Z)(),y=function(e){var t=e.isOpen,n=e.setIsOpen,l=e.getTopicOfGrade,p=(0,Z.cI)(),d=p.register,f=p.handleSubmit,x=p.reset,m=p.formState,h=p.watch,g=p.control,y=h("gradeId"),k=(0,i.useState)([]),T=(0,a.Z)(k,2),C=T[0],I=T[1],S=(0,i.useState)([]),O=(0,a.Z)(S,2),q=O[0],E=O[1],L=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get(o.T5+"grade/teacher");case 3:t=e.sent,I(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){L()}),[]);var F=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get(o.T5+"topic/teacher/grade/".concat(null===y||void 0===y?void 0:y.id));case 3:t=e.sent,E(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){F()}),[y]);var P=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var s,a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log(t.isLock),a=null!==(s=t.prerequisiteTopicId)&&void 0!==s&&s.id?{prerequisiteTopicId:t.prerequisiteTopicId.id}:{},i=(0,v.Z)({topicName:t.topicName,description:t.description,gradeId:t.gradeId.id,isUnlock:!t.isLock},a),e.next=6,w.post(o.T5+"topic",i);case 6:l(),n(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),(0,N.Am)("Create topic failed");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return(0,i.useEffect)((function(){m.isSubmitSuccessful&&(x({topicName:"",description:"",gradeId:-1,prerequisiteTopicId:-1}),n(!1))}),[m,x]),(0,b.jsxs)(j(),{isOpen:t,style:o.X2,shouldCloseOnOverlayClick:!0,contentLabel:"Example Modal",ariaHideApp:!1,children:[(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)("button",{onClick:function(){return n(!1)},children:(0,b.jsx)("i",{className:"fas fa-times"})})}),(0,b.jsxs)("form",{className:"flex flex-col w-[500px] ",onSubmit:f(P),children:[(0,b.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,b.jsx)("div",{className:"flex justify-center",children:(0,b.jsx)("h2",{className:"text-2xl font-semibold",children:"Create new topic"})}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{htmlFor:"topicName",children:"Topic name"}),(0,b.jsx)("input",(0,v.Z)({type:"text",name:"topicName",placeholder:"Enter topic name",className:"outline-none px-3 py-1 border-b-2  border-opacity-0 transition-all focus:border-primary"},d("topicName",{required:!0})))]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{htmlFor:"description",children:"Topic description"}),(0,b.jsx)("textarea",(0,v.Z)({type:"text",name:"description",placeholder:"Description",className:"resize-none outline-none px-3 py-1 border-b-2  border-opacity-0 transition-all focus:border-primary"},d("description",{required:!0})))]}),(0,b.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,b.jsx)("input",(0,v.Z)({id:"lockTopicCreate",type:"checkbox"},d("isLock"))),(0,b.jsx)("label",{htmlFor:"lockTopicCreate",className:"select-none cursor-pointer",children:"Lock topic"})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{htmlFor:"gradeId",children:"Grade"}),(0,b.jsx)(Z.Qr,{name:"gradeId",control:g,rules:{required:!0},render:function(e){var t=e.field;return(0,b.jsx)(c.ZP,(0,v.Z)((0,v.Z)({},t),{},{onChange:t.onChange,options:C,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.gradeName},styles:{menuList:function(e){return(0,v.Z)((0,v.Z)({},e),{},{maxHeight:"100px"})}}}))}})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,b.jsx)("label",{htmlFor:"prerequisiteTopicId",children:"Prerequisite topic"}),(null===q||void 0===q?void 0:q.length)>0&&(0,b.jsx)(Z.Qr,{name:"prerequisiteTopicId",control:g,render:function(e){var t=e.field;return(0,b.jsx)(c.ZP,(0,v.Z)((0,v.Z)({},t),{},{options:q,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.topicName},styles:{menuList:function(e){return(0,v.Z)((0,v.Z)({},e),{},{maxHeight:"160px"})}}}))}})]})]}),(0,b.jsx)(u.Z,{className:"border-none bg-primary w-full mt-5",children:"Create"})]})]})},k=(0,x.Z)(),T=function(){var e=(0,i.useState)([]),t=(0,a.Z)(e,2),n=t[0],x=t[1],v=(0,i.useState)({}),g=(0,a.Z)(v,2),j=g[0],Z=g[1],N=(0,i.useState)([]),w=(0,a.Z)(N,2),T=w[0],C=w[1],I=(0,i.useState)(!1),S=(0,a.Z)(I,2),O=S[0],q=S[1],E=(0,i.useState)(""),L=(0,a.Z)(E,2),F=L[0],P=L[1],A=(0,i.useState)([]),G=(0,a.Z)(A,2),_=G[0],z=G[1],H=(0,i.useState)({}),V=(0,a.Z)(H,2),D=V[0],Q=V[1],R=(0,i.useState)(),M=(0,a.Z)(R,2),U=M[0],X=M[1],B=(0,i.useState)(!1),J=(0,a.Z)(B,2),K=J[0],W=J[1],Y=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.post(o.T5+"file/image",{image:t.target.files[0]},{headers:{"Content-Type":"multipart/form-data"}});case 3:n=e.sent,D.topicImg=n.data,je(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&W(!0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),$=(0,i.useCallback)((0,s.Z)((0,r.Z)().mark((function e(){var t,n,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,null===j||void 0===j||!j.id){e.next=8;break}return e.next=4,k.get(o.T5+"topic/teacher/grade/".concat(null===j||void 0===j?void 0:j.id));case 4:n=e.sent,(s=n.data).length>0&&null!==(t=s[0])&&void 0!==t&&t.topicId&&!U&&(X(s[0].topicId),Q(s[0])),C(n.data);case 8:e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&W(!0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])}))),[U,null===j||void 0===j?void 0:j.id]);(0,i.useEffect)((function(){j&&$()}),[j,$]),(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get(o.T5+"grade/teacher");case 2:t=e.sent,x(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var ee=(0,i.useRef)(null),te=(0,i.useState)(""),ne=(0,a.Z)(te,2),re=ne[0],se=ne[1],ae=(0,i.useState)(!1),ie=(0,a.Z)(ae,2),ce=ie[0],le=ie[1],oe=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.delete(o.T5+"topic/".concat(t));case 3:X(null),j&&$(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&W(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ue=(0,i.useRef)(null),pe=(0,i.useState)(""),de=(0,a.Z)(pe,2),fe=de[0],xe=de[1],me=(0,i.useState)(!1),he=(0,a.Z)(me,2),ve=he[0],ge=he[1],je=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.put(o.T5+"topic/".concat(U),{topicName:null===ee||void 0===ee||null===(t=ee.current)||void 0===t?void 0:t.value,description:null===ue||void 0===ue||null===(n=ue.current)||void 0===n?void 0:n.value,topicImg:null===D||void 0===D?void 0:D.topicImg,gradeId:null===D||void 0===D?void 0:D.gradeId,prerequisiteTopicId:null===D||void 0===D?void 0:D.prerequisiteTopicId});case 3:$(),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&W(!0);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),Ze=(0,i.useState)(!1),Ne=(0,a.Z)(Ze,2),be=Ne[0],we=Ne[1],ye=(0,i.useCallback)((0,s.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!U){e.next=7;break}return e.next=4,k.get(o.T5+"skill/topic/".concat(U));case 4:t=e.sent,z(t.data),Q(T.find((function(e){return e.id===U}))||{});case 7:e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&W(!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])}))),[U,T]);return(0,i.useEffect)((function(){ye()}),[ye]),(0,i.useEffect)((function(){Q(T.find((function(e){return e.id===U})))}),[U,T]),(0,i.useEffect)((function(){se(null===D||void 0===D?void 0:D.topicName),xe(null===D||void 0===D?void 0:D.description)}),[D]),(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(y,{isOpen:O,setIsOpen:q,getTopicOfGrade:$}),(0,b.jsx)(m.Z,{modalCreateSkillIsOpen:be,setCreateSkillIsOpen:we,topicId:U,getTopicOfGrade:$}),(0,b.jsxs)("div",{className:"flex flex-row h-screen",children:[(0,b.jsxs)("div",{className:"w-[40%] flex flex-col px-5 py-5 gap-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-3 px-4",children:[(0,b.jsx)("div",{className:"flex flex-row items-center w-full",children:(0,b.jsx)(c.ZP,{options:n,onChange:Z,className:"w-full shadow",getOptionLabel:function(e){return e.gradeName},getOptionValue:function(e){return e.id},placeholder:"Select grade"})}),(0,b.jsxs)("div",{className:"flex flex-row justify-between items-center w-full",children:[(0,b.jsx)("input",{onChange:function(e){return P(e.target.value)},className:"outline-none rounded-lg text-base px-4 py-2 w-[65%] drop-shadow-md focus:drop-shadow-lg transition-all",placeholder:"Search topics"}),(0,b.jsx)(u.Z,{className:"border-none",onClick:function(){q(!0)},children:"Add a Topic"})]})]}),(0,b.jsx)("div",{className:"flex flex-col gap-7 px-4 pb-4 overflow-auto scroll-smooth",children:T.filter((function(e){return""===F||e.topicName.toLowerCase().includes(F.toLowerCase())?e:""})).map((function(e,t){return(0,b.jsx)(p.Z,{topicInfo:e,onDeleteTopic:oe,setCurrentTopicId:X,isTeacher:!0,gradeTopic:!0},t)}))})]}),(0,b.jsx)("div",{className:"flex flex-col transition-all gap-5 w-[60%] bg-white py-5 px-10 overflow-y-auto",children:U?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"flex flex-row gap-3 justify-center items-center",children:[(null===D||void 0===D?void 0:D.topicName)&&(0,b.jsx)("input",{ref:ee,size:(null===re||void 0===re?void 0:re.length)||10,value:re||"",onChange:function(e){return se(e.target.value)},className:"text-2xl text-center font-medium max-w-[600px] text-primary outline-none px-3 transition-all border-b-2 py-2 ".concat(ce?" border-primary ":"border-transparent"," "),readOnly:!ce}),(0,b.jsx)("i",{onClick:function(){return ee.current.focus(),le(!ce),void(ce&&je())},className:"fa-regular fa-pen-to-square mb-1 cursor-pointer text-primary font-medium text-xl select-none active:scale-90"})]}),(0,b.jsxs)("div",{className:"relative rounded-lg min-h-[300px] overflow-hidden flex items-center justify-center bg-center w-full select-none cursor-pointer transition-all",children:[(0,b.jsx)("img",{src:(null===D||void 0===D?void 0:D.topicImg)||"https://thumbs.dreamstime.com/b/letter-block-word-topic-wood-background-business-concept-170764857.jpg",className:"h-[300px] object-cover w-full",alt:""}),(0,b.jsxs)("label",{className:"absolute z-1 w-full text-transparent hover:text-white hover:bg-gray-800 flex justify-center items-center hover:bg-opacity-50 transition-all min-h-[300px] cursor-pointer",htmlFor:"image",children:[(0,b.jsx)("input",{type:"file",id:"image",name:"image",accept:"image/*",className:"w-0 h-0 opacity-0",onChange:Y}),(0,b.jsx)("span",{className:"text-2xl",children:"Click to edit"})]})]}),(null===D||void 0===D?void 0:D.prerequisiteTopicName)&&(0,b.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,b.jsx)("span",{className:"text-2xl font-medium text-gray-700",children:"Prerequisite Topic"}),(0,b.jsx)("span",{className:"",children:D.prerequisiteTopicName})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,b.jsx)("span",{className:"text-2xl font-medium text-gray-700",children:"Topic descriptions"}),(0,b.jsx)("span",{onClick:function(){ue.current.focus(),ge(!ve),ve&&je()},className:"mr-5 text-primary cursor-pointer active:scale-90 select-none",children:"Edit"})]}),(0,b.jsx)(d.Z,{ref:ue,value:fe,onChange:function(e){return xe(e.target.value)},className:"text-justify",readOnly:!ve,isEditing:ve})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,b.jsx)("span",{className:"text-2xl font-medium text-gray-700",children:"Skills"}),(0,b.jsx)(u.Z,{onClick:function(){we(!0)},children:"Add a skill"})]}),(0,b.jsx)("div",{className:"flex flex-col gap-1",children:_.map((function(e,t){return(0,b.jsx)(h.Z,{val:e,isTeacher:!0},e.id+t)}))})]})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"w-full h-full flex flex-col gap-5 items-center justify-center",children:[(0,b.jsx)("img",{src:l,alt:"",className:"h-[300px]"}),(0,b.jsx)("span",{className:"text-2xl font-[500] text-primary",children:"No content, choose 1 topic to view"})]})})}),(0,b.jsx)(f.Z,{isOpen:K})]})]})}}}]);
//# sourceMappingURL=404.aac712da.chunk.js.map