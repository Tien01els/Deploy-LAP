"use strict";(self.webpackChunktemplate_react_app=self.webpackChunktemplate_react_app||[]).push([[906],{4453:function(e,t,r){var n=r(1413),a=r(5987),s=(r(2791),r(184)),o=["children","className"];t.Z=function(e){var t=e.children,r=e.className,l=void 0===r?"":r,c=(0,a.Z)(e,o);return(0,s.jsx)("button",(0,n.Z)((0,n.Z)({className:"bg-primary py-2 px-5 rounded-lg border-2 text-white transition-all active:scale-90 cursor-pointer select-none hover:bg-opacity-90 text-center border-none ".concat(l," ")},c),{},{children:t}))}},6906:function(e,t,r){r(2791);var n=r(7948),a=r.n(n),s=r(4453),o=r(184);t.Z=function(e){var t=e.isOpen,r=e.message,n=e.yesConfirm,l=e.noConfirm;return(0,o.jsxs)(a(),{isOpen:t,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}},shouldCloseOnOverlayClick:!0,contentLabel:"Example Modal",ariaHideApp:!1,children:[(0,o.jsxs)("div",{className:"flex flex-col gap-4 w-[500px]",children:[(0,o.jsx)("span",{className:"text-2xl font-medium",children:"Confirm"}),(0,o.jsx)("span",{children:r})]}),(0,o.jsxs)("div",{className:"flex flex-row-reverse mt-5 gap-5",children:[(0,o.jsx)(s.Z,{onClick:n,children:"Yes"}),(0,o.jsx)(s.Z,{onClick:function(){l()},children:"No"})]})]})}},1756:function(e,t,r){var n=r(4165),a=r(5861),s=(r(2791),r(7948)),o=r.n(s),l=r(7689),c=r(3458),i=r(4212),u=r(4453),d=r(184),p=(0,i.Z)();t.Z=function(e){var t=e.isOpen,r=(0,l.s0)(),s=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete(c.T5+"account/logout");case 3:localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),r("/"),window.location.reload(),e.next=16;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),r("/"),window.location.reload();case 16:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(o(),{isOpen:t,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}},contentLabel:"Example Modal",ariaHideApp:!1,children:(0,d.jsxs)("div",{className:"flex flex-col gap-4 w-[500px]",children:[(0,d.jsx)("span",{className:"text-2xl font-medium",children:"Session Expired"}),(0,d.jsx)("span",{children:"Your session has expired please login again, click the button bellow to go back login screen"}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsx)(u.Z,{onClick:s,className:"w-[50%]",children:"Login"})})]})})}},4212:function(e,t,r){var n=r(4165),a=r(5861),s=r(4569),o=r.n(s),l=r(456),c=r(7689),i=r(3458),u=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("refresh_token"),e.next=4,o().post(i.T5+"account/refresh-token",{},{headers:{Authorization:"Bearer ".concat(t)}});case 4:return r=e.sent,e.abrupt("return",r.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();t.Z=function(){var e=o().create();return e.interceptors.request.use(function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=localStorage.getItem("access_token"))){e.next=19;break}if(a=(0,l.Z)(r),e.prev=3,!(a.exp<Date.now()/1e3)){e.next=13;break}return e.next=7,u();case 7:s=e.sent,localStorage.setItem("access_token",s.accessToken),localStorage.setItem("refresh_token",s.refreshToken),t.headers.Authorization="Bearer "+s.accessToken,e.next=14;break;case 13:t.headers.Authorization="Bearer "+r;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log(e),(0,c.s0)()("/")})),e}},1906:function(e,t,r){r.r(t),r.d(t,{default:function(){return A}});var n=r(4165),a=r(5861),s=r(885),o=r(2791),l=r(4453),c=r(1413),i=r(7948),u=r.n(i),d=r(1134),p=r(4255),x=r(3458),f=r(4212),m=r(184),h=(0,f.Z)(),v={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}},g=[{value:"1",label:"Admin"},{value:"2",label:"Teacher"},{value:"3",label:"Student"},{value:"4",label:"Parent"}],b=function(e){var t,r=e.isOpen,i=e.setIsOpen,f=e.edit,b=e.getAllAccounts,j=(0,d.cI)(),y=j.control,w=j.register,Z=j.formState.errors,k=j.handleSubmit,N=j.watch,C=(0,o.useState)(!1),A=(0,s.Z)(C,2),S=A[0],I=A[1],O=N("role");(0,o.useEffect)((function(){"3"===(null===O||void 0===O?void 0:O.value)?I(!0):I(!1)}),[O]);var E=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r={email:t.email,password:t.password,roleId:t.role.value,parentId:S&&t.parentId},e.next=4,h.post(x.T5+"account/create-account",r);case 4:i(!1),b(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return(0,m.jsx)(u(),{id:"AccountManageModal",isOpen:r,style:v,shouldCloseOnOverlayClick:!0,contentLabel:"Example Modal",ariaHideApp:!1,children:(0,m.jsxs)("div",{className:"flex flex-col w-[500px] h-fit gap-5",children:[(0,m.jsx)("span",{className:"text-2xl",children:"Create account"}),(0,m.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:k(E),children:[(0,m.jsxs)("div",{className:"flex flex-col gap-2 px-2",children:[(0,m.jsx)("span",{className:"px-2",children:"Role"}),(0,m.jsx)(d.Qr,{name:"role",control:y,rules:{required:!0},render:function(e){var t=e.field;return(0,m.jsx)(p.ZP,(0,c.Z)((0,c.Z)({},t),{},{options:g,placeholder:"Pick a role"}))}})]}),S&&(0,m.jsxs)("div",{className:"flex flex-col gap-2 px-2 w-full",children:[(0,m.jsx)("span",{className:"px-2",children:"Parent id"}),(0,m.jsx)("input",(0,c.Z)((0,c.Z)({},w("parentId",{required:!0})),{},{placeholder:"Parent id",className:"outline-none px-3 py-1 border-b-2  border-opacity-0 transition-all focus:border-primary"}))]}),(0,m.jsxs)("div",{className:"flex flex-col gap-2 px-2 w-full",children:[(0,m.jsxs)("span",{className:"px-2 flex flex-row justify-between items-center",children:["Email","pattern"===(null===(t=Z.email)||void 0===t?void 0:t.type)&&(0,m.jsx)("p",{role:"alert",className:"text-red-500 w-full text-right text-sm",children:"Wrong email format"})]}),(0,m.jsx)("input",(0,c.Z)((0,c.Z)({type:"text"},w("email",{required:"Email is required",pattern:{value:/^[\w-\.]+@([\w-]+\.)+[\w-]{2,4}$/,message:"Please enter valid Email"}})),{},{placeholder:"Type in email",className:"outline-none px-3 py-1 border-b-2  border-opacity-0 transition-all focus:border-primary"}))]}),(0,m.jsxs)("div",{className:"flex flex-col gap-2 px-2 w-full",children:[(0,m.jsx)("span",{className:"px-2",children:"Password"}),(0,m.jsx)("input",(0,c.Z)((0,c.Z)({type:"password"},w("password",{required:!0})),{},{placeholder:"Type in password",className:"outline-none px-3 py-1 border-b-2  border-opacity-0 transition-all focus:border-primary"}))]}),(0,m.jsxs)("div",{className:"w-full flex flex-row-reverse gap-5",children:[(0,m.jsx)(l.Z,{type:"submit",children:f?"Save":"Create"}),(0,m.jsx)(l.Z,{onClick:function(){return i(!r)},children:"Cancel"})]})]})]})})},j=r(1756),y=r(6048),w=r.n(y),Z=r(6906),k=(0,f.Z)(),N=function(e){var t=e.val,r=e.getAllAccounts,l=e.setIsExpired,c=(0,o.useState)(!1),i=(0,s.Z)(c,2),u=i[0],d=i[1],p=(0,o.useState)(!1),f=(0,s.Z)(p,2),h=f[0],v=f[1],g=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.put(x.T5+"account/".concat(null===t||void 0===t?void 0:t.id,"/change-active"));case 3:d(!1),r(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&l(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.delete(x.T5+"account/".concat(null===t||void 0===t?void 0:t.id));case 3:v(!1),r(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&l(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Z.Z,{isOpen:u,message:"Are you sure to ban this account ?",noConfirm:function(){return d(!1)},yesConfirm:function(){return g()}}),(0,m.jsx)(Z.Z,{isOpen:h,message:"Are you sure to remove this account ?",noConfirm:function(){return v(!1)},yesConfirm:function(){return b()}}),(0,m.jsxs)("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[(0,m.jsx)("th",{scope:"row",className:"py-4 px-6",children:null===t||void 0===t?void 0:t.id}),(0,m.jsx)("th",{className:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:null===t||void 0===t?void 0:t.email}),(0,m.jsx)("td",{className:"py-4 px-6 ".concat(null!==t&&void 0!==t&&t.isActive?"text-green-500":"text-red-500"),children:null!==t&&void 0!==t&&t.isActive?"Active":"Banned"}),(0,m.jsx)("td",{className:"py-4 px-6",children:null===t||void 0===t?void 0:t.role.role}),(0,m.jsxs)("td",{className:"py-4 px-6 text-right flex flex-row justify-between select-none",children:[(0,m.jsx)("span",{onClick:function(){d(!0)},className:"font-medium text-orange-500 dark:text-blue-500 hover:cursor-pointer",children:null!==t&&void 0!==t&&t.isActive?"Ban":"Unban"}),(0,m.jsx)("span",{onClick:function(){v(!0)},className:"font-medium text-red-500 dark:text-blue-500 hover:cursor-pointer",children:"Remove"})]})]},null===t||void 0===t?void 0:t.id)]})},C=(0,f.Z)(),A=function(){var e=(0,o.useState)(!1),t=(0,s.Z)(e,2),r=t[0],c=t[1],i=(0,o.useState)(!1),u=(0,s.Z)(i,2),d=u[0],p=u[1],f=(0,o.useState)([]),h=(0,s.Z)(f,2),v=h[0],g=h[1],y=(0,o.useState)(0),Z=(0,s.Z)(y,2),k=Z[0],A=Z[1],S=k+9,I=v.slice(k,S),O=Math.ceil(v.length/9),E=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.get(x.T5+"account");case 3:r=e.sent,g(null===(t=r.data)||void 0===t?void 0:t.data),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&p(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){E()}),[]),console.log(v),(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"px-10 py-7 flex flex-col gap-5",children:[(0,m.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,m.jsx)("span",{className:"text-2xl font-[500] text-gray-600",children:"Manage Account"}),(0,m.jsx)(l.Z,{onClick:function(){c(!0)},children:"Add an account"}),(0,m.jsx)(b,{isOpen:r,setIsOpen:c,getAllAccounts:E})]}),(0,m.jsx)("div",{className:"overflow-x-auto h-[521px] relative shadow-md sm:rounded-lg",children:(0,m.jsxs)("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400",children:[(0,m.jsx)("thead",{className:" text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Id"}),(0,m.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Email"}),(0,m.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Active"}),(0,m.jsx)("th",{scope:"col",className:"py-3 px-6",children:"Role"}),(0,m.jsx)("th",{scope:"col",className:"py-3 px-6",children:(0,m.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),(0,m.jsx)("tbody",{children:null===I||void 0===I?void 0:I.map((function(e,t){return(0,m.jsx)(N,{val:e,getAllAccounts:E,setIsExpired:p},t)}))})]})}),(0,m.jsx)(w(),{breakLabel:"...",onPageChange:function(e){var t=9*e.selected%v.length;A(t)},pageRangeDisplayed:5,pageCount:O,renderOnZeroPageCount:null,nextLabel:(0,m.jsxs)("button",{className:"flex flex-row items-center gap-3",children:["Next ",(0,m.jsx)("i",{className:"fas fa-angle-right text-xs"})]}),previousLabel:(0,m.jsxs)("button",{className:"flex flex-row items-center gap-3",children:[(0,m.jsx)("i",{className:"fas fa-angle-left text-xs"})," Previous"]}),className:"flex flex-row gap-5 items-center justify-center select-none",activeClassName:"bg-primary text-white flex justify-center items-center w-[40px] h-[40px] rounded-full shadow-lg"}),(0,m.jsx)(j.Z,{isOpen:d})]})})}}}]);
//# sourceMappingURL=906.3f86edea.chunk.js.map