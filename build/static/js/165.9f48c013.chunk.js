"use strict";(self.webpackChunktemplate_react_app=self.webpackChunktemplate_react_app||[]).push([[165],{4453:function(e,n,t){var s=t(1413),i=t(5987),a=(t(2791),t(184)),o=["children","className"];n.Z=function(e){var n=e.children,t=e.className,r=void 0===t?"":t,l=(0,i.Z)(e,o);return(0,a.jsx)("button",(0,s.Z)((0,s.Z)({className:"bg-primary py-2 px-5 rounded-lg border-2 text-white transition-all active:scale-90 cursor-pointer select-none hover:bg-opacity-90 text-center border-none ".concat(r," ")},l),{},{children:n}))}},6906:function(e,n,t){t(2791);var s=t(7948),i=t.n(s),a=t(4453),o=t(184);n.Z=function(e){var n=e.isOpen,t=e.message,s=e.yesConfirm,r=e.noConfirm;return(0,o.jsxs)(i(),{isOpen:n,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}},shouldCloseOnOverlayClick:!0,contentLabel:"Example Modal",ariaHideApp:!1,children:[(0,o.jsxs)("div",{className:"flex flex-col gap-4 w-[500px]",children:[(0,o.jsx)("span",{className:"text-2xl font-medium",children:"Confirm"}),(0,o.jsx)("span",{children:t})]}),(0,o.jsxs)("div",{className:"flex flex-row-reverse mt-5 gap-5",children:[(0,o.jsx)(a.Z,{onClick:s,children:"Yes"}),(0,o.jsx)(a.Z,{onClick:function(){r()},children:"No"})]})]})}},8093:function(e,n,t){var s=t(4165),i=t(5861),a=t(885),o=t(2791),r=t(7948),l=t.n(r),c=t(2426),d=t.n(c),u=t(7689),x=t(3458),m=t(4212),f=t(1756),p=t(4453),v=t(184),g=(0,m.Z)(),h={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px",overflow:"unset !important"}};n.Z=function(e){var n=e.isOpen,t=e.setIsOpen,r=e.val,c=e.isParent,m=e.classPage,j=(0,u.s0)(),w=(0,o.useState)(!1),b=(0,a.Z)(w,2),k=b[0],N=b[1];console.log("Teacher",r);var Z=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"start"!==t){e.next=4;break}return e.next=4,g.put(x.T+"student-assignment/student/assignment/".concat(n,"/start"));case 4:j("/assignment/".concat(n,"/question/")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&N(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,v.jsxs)(l(),{isOpen:n,style:h,contentLabel:"Example Modal",ariaHideApp:!1,children:[(0,v.jsxs)("div",{className:"flex flex-col gap-4 w-[500px] text-gray-500",children:[(0,v.jsx)("span",{className:"text-2xl font-medium text-primary whitespace-normal break-words w-full",children:null===r||void 0===r?void 0:r.assignment.assignmentName}),(0,v.jsxs)("div",{className:"flex flex-row ",children:[(0,v.jsxs)("div",{className:"flex flex-row gap-3 items-center w-[50%]",children:[(0,v.jsx)("div",{className:"bg-gray-100 flex items-center h-[30px] w-[30px] rounded-lg justify-center",children:(0,v.jsx)("i",{className:"fa-regular fa-clock text-primary"})}),(0,v.jsxs)("span",{children:[null===r||void 0===r?void 0:r.assignment.doTime," mins"]})]}),(0,v.jsxs)("div",{className:"flex flex-row gap-3 items-center ",children:[(0,v.jsxs)("div",{className:"bg-gray-100 flex items-center h-[30px] w-[30px] rounded-lg justify-center",children:[(0,v.jsx)("i",{className:"fa-regular fa-calendar text-primary"})," "]}),(0,v.jsx)("span",{children:d()(null===r||void 0===r?void 0:r.assignment.dateDue).format("HH:mm DD/MM/YYYY")})]})]}),(0,v.jsxs)("div",{className:"flex flex-row ",children:[(null===r||void 0===r?void 0:r.numberQuestionOfAssignment)&&(0,v.jsxs)("div",{className:"flex flex-row gap-3 items-center w-[50%]",children:[(0,v.jsx)("div",{className:"bg-gray-100 flex items-center h-[30px] w-[30px] rounded-lg justify-center",children:(0,v.jsx)("i",{className:"fa-solid fa-clipboard-question text-primary"})}),(0,v.jsxs)("span",{children:[null===r||void 0===r?void 0:r.numberQuestionOfAssignment," question"]})]}),(0,v.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,v.jsx)("div",{className:"bg-gray-100 flex items-center h-[30px] w-[30px] rounded-lg justify-center",children:(0,v.jsx)("i",{className:"fa-regular fa-star text-primary"})}),(0,v.jsxs)("span",{children:["Pass score : ",null===r||void 0===r?void 0:r.assignment.passScore,"/",null===r||void 0===r?void 0:r.assignment.totalScore," "]})]})]}),(0,v.jsxs)("div",{className:"flex flex-row gap-3 items-center",children:[(0,v.jsx)("div",{className:"bg-gray-100 flex items-center h-[30px] w-[30px] rounded-lg justify-center",children:(0,v.jsx)("i",{className:"fa-brands fa-cloudsmith text-primary"})}),(0,v.jsx)("span",{className:" text-gray-500",children:function(){var e,n,t,s;return m?null!==r&&void 0!==r&&null!==(e=r.assignment)&&void 0!==e&&null!==(n=e.studentAssignment[0])&&void 0!==n&&n.dateComplete?"Submitted on ".concat(d()(null===r||void 0===r||null===(t=r.assignment)||void 0===t||null===(s=t.studentAssignment[0])||void 0===s?void 0:s.dateComplete).format("hh:mm DD/MM/YYYY")):"Not submitted":null!==r&&void 0!==r&&r.dateComplete?"Submitted on ".concat(d()(null===r||void 0===r?void 0:r.dateComplete).format("hh:mm DD/MM/YYYY")):null!==r&&void 0!==r&&r.dateComplete?void 0:"Not submitted"}()})]})]}),(0,v.jsxs)("div",{className:"flex flex-row-reverse mt-5 gap-5",children:[(0,v.jsx)(p.Z,{onClick:function(){t(!1)},children:"Cancel"}),function(){return 0===(null===r||void 0===r?void 0:r.numberQuestionOfAssignment)?(0,v.jsx)(v.Fragment,{}):m?c?null!==r&&void 0!==r&&null!==(i=r.assignment)&&void 0!==i&&null!==(a=i.studentAssignment[0])&&void 0!==a&&a.dateComplete?(0,v.jsx)(p.Z,{onClick:function(){j("/assignment/".concat(null===r||void 0===r?void 0:r.assignment.id,"/result"))},children:"View Result"}):(0,v.jsx)(v.Fragment,{}):null!==r&&void 0!==r&&null!==(e=r.assignment)&&void 0!==e&&null!==(n=e.studentAssignment[0])&&void 0!==n&&n.dateComplete?(0,v.jsx)(p.Z,{onClick:function(){j("/assignment/".concat(null===r||void 0===r?void 0:r.assignment.id,"/result"))},children:"View Result"}):null!==r&&void 0!==r&&null!==(t=r.assignment)&&void 0!==t&&null!==(s=t.studentAssignment[0])&&void 0!==s&&s.dateEnd?(0,v.jsx)(p.Z,{onClick:function(){return Z(null===r||void 0===r?void 0:r.assignment.id,"continue")},children:"Continue Assignment"}):(0,v.jsx)(p.Z,{onClick:function(){return Z(null===r||void 0===r?void 0:r.assignment.id,"start")},children:"Do Assignment"}):c?null!==r&&void 0!==r&&r.dateComplete?(0,v.jsx)(p.Z,{onClick:function(){j("/assignment/".concat(null===r||void 0===r?void 0:r.assignment.id,"/result"))},children:"View Result"}):(0,v.jsx)(v.Fragment,{}):null!==r&&void 0!==r&&r.dateComplete?(0,v.jsx)(p.Z,{onClick:function(){j("/assignment/".concat(null===r||void 0===r?void 0:r.assignment.id,"/result"))},children:"View Result"}):null!==r&&void 0!==r&&r.dateEnd?(0,v.jsx)(p.Z,{onClick:function(){return Z(null===r||void 0===r?void 0:r.assignment.id,"continue")},children:"Continue Assignment"}):(0,v.jsx)(p.Z,{onClick:function(){return Z(null===r||void 0===r?void 0:r.assignment.id,"start")},children:"Do Assignment"});var e,n,t,s,i,a}()]}),(0,v.jsx)(f.Z,{isOpen:k})]})}},1756:function(e,n,t){var s=t(4165),i=t(5861),a=(t(2791),t(7948)),o=t.n(a),r=t(7689),l=t(3458),c=t(4212),d=t(4453),u=t(184),x=(0,c.Z)();n.Z=function(e){var n=e.isOpen,t=(0,r.s0)(),a=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.delete(l.T+"account/logout");case 3:localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),t("/"),window.location.reload(),e.next=16;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),t("/"),window.location.reload();case 16:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,u.jsx)(o(),{isOpen:n,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}},contentLabel:"Example Modal",ariaHideApp:!1,children:(0,u.jsxs)("div",{className:"flex flex-col gap-4 w-[500px]",children:[(0,u.jsx)("span",{className:"text-2xl font-medium",children:"Session Expired"}),(0,u.jsx)("span",{children:"Your session has expired please login again, click the button bellow to go back login screen"}),(0,u.jsx)("div",{className:"flex justify-center",children:(0,u.jsx)(d.Z,{onClick:a,className:"w-[50%]",children:"Login"})})]})})}},1878:function(e,n,t){var s=t(4165),i=t(5861),a=t(885),o=t(2791),r=t(456),l=t(6906),c=t(9520),d=t(184);n.Z=function(e){var n=e.topicInfo,t=e.onDeleteTopic,u=e.isTeacher,x=e.setCurrentTopicId,m=e.isParent,f=e.gradeTopic,p=(0,o.useContext)(c.J),v=(0,o.useState)(!1),g=(0,a.Z)(v,2),h=g[0],j=g[1],w=(0,o.useState)(!1),b=(0,a.Z)(w,2),k=b[0],N=b[1],Z=(0,o.useState)(!1),y=(0,a.Z)(Z,2),C=y[0],I=y[1],S=localStorage.getItem("access_token"),T=(0,o.useMemo)((function(){return S&&(0,r.Z)(S)}),[S]),A=function(){!m&&!k&&j(!h)},O=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===p||void 0===p||p.emit("send-request-unlock-topic",{senderId:null===T||void 0===T?void 0:T.accountId,userId:null===T||void 0===T?void 0:T.userId,topicId:null===n||void 0===n?void 0:n.topicId,tableHandle:"Student_Topic",idTableHandle:n.id}),j(!h),N(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,o.useEffect)((function(){N(null===n||void 0===n?void 0:n.notificationContentId)}),[n]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{isOpen:h,noConfirm:A,yesConfirm:O,message:"Confirm to send request to open this topic."}),(0,d.jsx)(l.Z,{isOpen:C,noConfirm:function(){I(!1)},yesConfirm:function(){t(null===n||void 0===n?void 0:n.id),I(!1)},message:"Are you sure to remove this from class topic?"}),(0,d.jsxs)("div",{onClick:function(){!function(){if(null!==n&&void 0!==n&&n.isUnlock&&x(null===n||void 0===n?void 0:n.topicId),u){if(f)return x(null===n||void 0===n?void 0:n.id);x(null===n||void 0===n?void 0:n.topicId)}}()},className:"w-full relative cursor-pointer flex flex-row gap-4 bg-white rounded-[16px] items-center shadow-md hover:shadow-lg transition-all select-none px-3 py-3",children:[!(null!==n&&void 0!==n&&n.isUnlock)&&!u&&(0,d.jsx)("div",{onClick:function(){return A()},className:"w-full absolute flex flex-row gap-4 items-center justify-center bg-gray-700 bg-opacity-70 rounded-[16px] h-[152px] -translate-x-3 z-1 ".concat(k?"":"cursor-pointer"),children:(0,d.jsx)("span",{className:"text-white",children:k?"Waiting for teacher response...":m?"Locked":"Request to open topic"})}),(0,d.jsx)("img",{src:(null===n||void 0===n?void 0:n.topicImg)||"https://thumbs.dreamstime.com/b/letter-block-word-topic-wood-background-business-concept-170764857.jpg",alt:"",className:" object-cover h-32 w-32 rounded-lg "}),(0,d.jsxs)("div",{className:"flex flex-col justify-evenly w-full h-full",children:[(0,d.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,d.jsx)("span",{className:"font-medium w-[225px] truncate cursor-pointer",children:null===n||void 0===n?void 0:n.topicName}),u&&(0,d.jsx)("div",{className:"rounded-full relative h-[30px] w-[30px] cursor-pointer select-none flex items-center justify-center bg-white hover:bg-gray-100",onClick:function(){I(!0)},children:(0,d.jsx)("i",{className:"fa-regular fa-trash-can text-sm text-red-400"})})]}),(0,d.jsx)("span",{className:"text-xs w-[260px] h-[48px] whitespace-normal break-words line-clamp-3",children:null===n||void 0===n?void 0:n.description}),(0,d.jsxs)("div",{className:"flex flex-row justify-between items-center mr-2 text-xs",children:[(0,d.jsxs)("span",{children:["Skills :"," ",(0,d.jsx)("span",{className:"text-primary",children:null===n||void 0===n?void 0:n.numberSkills})]}),(0,d.jsx)("span",{className:"text-primary cursor-pointer",onClick:function(){x(null===n||void 0===n?void 0:n.topicId)},children:"View"})]})]})]})]})}},4212:function(e,n,t){var s=t(4165),i=t(5861),a=t(4569),o=t.n(a),r=t(456),l=t(7689),c=t(3458),d=function(){var e=(0,i.Z)((0,s.Z)().mark((function e(){var n,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=localStorage.getItem("refresh_token"),e.next=4,o().post(c.T+"account/refresh-token",{},{headers:{Authorization:"Bearer ".concat(n)}});case 4:return t=e.sent,e.abrupt("return",t.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();n.Z=function(){var e=o().create();return e.interceptors.request.use(function(){var e=(0,i.Z)((0,s.Z)().mark((function e(n){var t,i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("access_token"))){e.next=19;break}if(i=(0,r.Z)(t),e.prev=3,!(i.exp<Date.now()/1e3)){e.next=13;break}return e.next=7,d();case 7:a=e.sent,localStorage.setItem("access_token",a.accessToken),localStorage.setItem("refresh_token",a.refreshToken),n.headers.Authorization="Bearer "+a.accessToken,e.next=14;break;case 13:n.headers.Authorization="Bearer "+t;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(n){return e.apply(this,arguments)}}(),(function(e){console.log(e),(0,l.s0)()("/")})),e}},1165:function(e,n,t){t.r(n),t.d(n,{default:function(){return N}});var s=t(2982),i=t(4165),a=t(5861),o=t(885),r=t(2791),l=(t(1009),t(7689)),c=t(456),d=(t(4676),t(4432),t(1756)),u=t(1878),x=t(3458),m=t(4212),f=t(9520),p=t(8661),v=t(4453),g=t(8093),h=t(184),j=function(e){var n,t=e.assignmentOfSkill,s=e.isParent,i=e.handleDoAssignment,a=(0,l.s0)(),c=(0,r.useState)(!1),d=(0,o.Z)(c,2),u=d[0],x=d[1];return console.log("test",t),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(g.Z,{isOpen:u,setIsOpen:x,val:t,isParent:s,classPage:!0}),(0,h.jsxs)("div",{className:"flex flex-row items-center justify-between",children:[(0,h.jsx)("span",{onClick:function(){x(!0)},className:"cursor-pointer w-[70%] truncate text-primary",children:null===t||void 0===t||null===(n=t.assignment)||void 0===n?void 0:n.assignmentName}),function(e){var n,t,o,r,l,c;return s&&null!==e&&void 0!==e&&null!==(n=e.assignment)&&void 0!==n&&null!==(t=n.studentAssignment[0])&&void 0!==t&&t.dateComplete?(0,h.jsx)(v.Z,{className:"text-xs",onClick:function(){a("/assignment/".concat(e.assignment.id,"/result"))},children:"View Result"}):s?void 0:0===(null===e||void 0===e?void 0:e.numberQuestionOfAssignment)?(0,h.jsx)(h.Fragment,{}):null!==e&&void 0!==e&&null!==(o=e.assignment)&&void 0!==o&&null!==(r=o.studentAssignment[0])&&void 0!==r&&r.dateComplete?(0,h.jsx)(v.Z,{className:"text-xs",onClick:function(){a("/assignment/".concat(e.assignment.id,"/result"))},children:"View Result"}):null!==e&&void 0!==e&&null!==(l=e.assignment)&&void 0!==l&&null!==(c=l.studentAssignment[0])&&void 0!==c&&c.dateEnd?(0,h.jsx)(v.Z,{className:"text-xs",onClick:function(){return i(e.assignment.id,"continue")},children:"Continue Assignment"}):(0,h.jsx)(v.Z,{className:"text-xs",onClick:function(){return i(e.assignment.id,"start")},children:"Do Assignment"})}(t)]})]})},w=(0,m.Z)(),b=function(e){var n,t=e.val,s=e.isParent,c=e.studentInfo,u=(0,l.s0)(),m=(0,r.useState)([]),f=(0,o.Z)(m,2),p=f[0],v=f[1],g=(0,r.useState)(!1),b=(0,o.Z)(g,2),k=b[0],N=b[1],Z=(0,r.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var n,a,o;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s){e.next=8;break}if(!c){e.next=6;break}return e.next=5,w.get(x.T+"parent/student/".concat(null===c||void 0===c?void 0:c.id,"/skill/").concat(null===t||void 0===t||null===(a=t.skill)||void 0===a?void 0:a.id));case 5:n=e.sent;case 6:e.next=11;break;case 8:return e.next=10,w.get(x.T+"skill-assignment/student/skill/".concat(null===t||void 0===t||null===(o=t.skill)||void 0===o?void 0:o.id));case 10:n=e.sent;case 11:v(n.data),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&N(!0);case 18:case"end":return e.stop()}}),e,null,[[0,14]])}))),[null===t||void 0===t||null===(n=t.skill)||void 0===n?void 0:n.id,s,c]),y=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(n,t){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,"start"!==t){e.next=4;break}return e.next=4,w.put(x.T+"student-assignment/student/assignment/".concat(n,"/start"));case 4:u("/assignment/".concat(n,"/question/")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&N(!0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(n,t){return e.apply(this,arguments)}}();return(0,r.useEffect)((function(){Z()}),[Z]),(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"flex flex-col gap-3 px-2 py-3",children:[(0,h.jsxs)("div",{className:"flex border-b p-y-2 pb-2 flex-row justify-between items-center",children:[(0,h.jsx)("span",{className:"text-xl",children:null===t||void 0===t?void 0:t.skill.skillName}),(0,h.jsx)("div",{className:"flex flex-row gap-5 items-center",children:(0,h.jsx)("span",{className:"text-primary text-sm",children:null===t||void 0===t?void 0:t.skill.standardName})})]}),(0,h.jsx)("div",{className:"flex flex-col gap-4",children:null===p||void 0===p?void 0:p.map((function(e,n){return(0,h.jsx)(j,{assignmentOfSkill:e,isParent:s,handleDoAssignment:y},n)}))}),(0,h.jsx)(d.Z,{isOpen:k})]})})},k=(0,m.Z)(),N=function(e){var n=e.isParent,t=(0,r.useContext)(f.J),m=(0,l.s0)(),v=localStorage.getItem("access_token"),g=(0,r.useMemo)((function(){return v&&(0,c.Z)(v)}),[v]),j=(0,l.UO)().classId,w=(0,r.useState)(null),N=(0,o.Z)(w,2),Z=N[0],y=N[1],C=(0,r.useState)(null),I=(0,o.Z)(C,2),S=I[0],T=I[1];(0,r.useEffect)((function(){if(n){var e=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.get(x.T+"parent/student");case 3:t=e.sent,y(t.data),m("/class/".concat(null===(n=t.data)||void 0===n?void 0:n.classId)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e()}else{var t=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get(x.T+"student/class");case 2:t=e.sent,T(t.data),(null===g||void 0===g?void 0:g.classId)!==parseInt(j)&&m("/class/".concat((null===(n=t.data)||void 0===n?void 0:n.id)||(null===g||void 0===g?void 0:g.classId)));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t()}}),[g,j]);var A=(0,r.useState)([]),O=(0,o.Z)(A,2),_=O[0],D=O[1],Y=(0,r.useState)(""),E=(0,o.Z)(Y,2),R=E[0],q=E[1],P=(0,r.useState)(),M=(0,o.Z)(P,2),F=M[0],H=M[1],L=(0,r.useState)([]),V=(0,o.Z)(L,2),z=V[0],Q=V[1],U=(0,r.useState)(""),B=(0,o.Z)(U,2),J=B[0],W=B[1],G=(0,r.useState)([]),K=(0,o.Z)(G,2),X=K[0],$=K[1],ee=(0,r.useState)(!1),ne=(0,o.Z)(ee,2),te=ne[0],se=ne[1],ie=function(e){for(var n=0;n<e.length;n++)if(1===e[n].isUnlock)return e[n].topicId},ae=(0,r.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var t,a,o,r,l,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=9;break}if(!Z){e.next=7;break}return e.next=5,k.get(x.T+"parent/student/".concat(null===Z||void 0===Z?void 0:Z.id,"/class/").concat(j,"/topic"));case 5:a=e.sent,t=a.data;case 7:e.next=13;break;case 9:return e.next=11,k.get(x.T+"student-topic/student/class/".concat(j));case 11:o=e.sent,t=o.data;case 13:if(t){for(J||W(ie(t)),r=[],l=0;l<(null===(c=t)||void 0===c?void 0:c.length);++l)r=[].concat((0,s.Z)(r),[{id:t[l].topicId,topicName:t[l].topicName,description:t[l].description,topicImg:t[l].topicImg,prerequisiteTopicName:t[l].prerequisiteTopicName,classTopicId:t[l].id}]);$(r),D(t)}e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&se(!0);case 20:case"end":return e.stop()}}),e,null,[[0,16]])}))),[j,J,n,Z]),oe=(0,r.useCallback)((0,a.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!J){e.next=13;break}if(!J||!n){e.next=8;break}return e.next=5,k.get(x.T+"parent/student/".concat(null===Z||void 0===Z?void 0:Z.id,"/topic/").concat(J));case 5:t=e.sent,e.next=11;break;case 8:return e.next=10,k.get(x.T+"student-skill/student/topic/".concat(J));case 10:t=e.sent;case 11:Q(t.data),H(X.find((function(e){return e.id===J}))||{});case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&se(!0);case 19:case"end":return e.stop()}}),e,null,[[0,15]])}))),[J,X,n,null===Z||void 0===Z?void 0:Z.id]);return(0,r.useEffect)((function(){oe()}),[oe]),(0,r.useEffect)((function(){ae()}),[ae]),(0,r.useEffect)((function(){return null===t||void 0===t||t.on("get-handle-request-notification",(function(e){(null===e||void 0===e?void 0:e.senderId)!==(null===g||void 0===g?void 0:g.accountId)&&"Student_Topic"===(null===e||void 0===e?void 0:e.tableHandle)&&ae()})),function(){null===t||void 0===t||t.off("get-handle-request-notification")}}),[t,g]),(0,h.jsxs)("div",{className:"flex flex-row h-screen",children:[(0,h.jsxs)("div",{className:"w-[40%] flex flex-col px-5 py-5 gap-6",children:[(0,h.jsxs)("div",{className:"flex flex-col gap-3 px-4",children:[(0,h.jsx)("span",{className:"text-2xl font-medium truncate",children:null===S||void 0===S?void 0:S.className}),(0,h.jsx)("div",{className:"flex flex-row justify-between items-center w-full",children:(0,h.jsx)("input",{onChange:function(e){return q(e.target.value)},className:"outline-none rounded-lg text-base px-4 py-2 w-[65%] drop-shadow-md focus:drop-shadow-lg transition-all",placeholder:"Search topics"})})]}),(0,h.jsx)("div",{className:"flex flex-col gap-7 px-4 pb-4 overflow-auto scroll-smooth",children:_.filter((function(e){return""===R||e.topicName.toLowerCase().includes(R.toLowerCase())?e:""})).map((function(e,t){return(0,h.jsx)(u.Z,{topicInfo:e,setCurrentTopicId:W,isParent:n},t)}))})]}),(0,h.jsx)("div",{className:"flex flex-col gap-5 w-[60%] bg-white py-5 px-10 overflow-y-auto",children:F?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"flex flex-row gap-3 justify-center items-center",children:(0,h.jsx)("span",{className:"text-2xl text-primary",children:null===F||void 0===F?void 0:F.topicName})}),(0,h.jsx)("div",{className:"relative rounded-lg min-h-[300px] overflow-hidden flex items-center justify-center bg-center w-full select-none cursor-pointer transition-all",children:(0,h.jsx)("img",{src:(null===F||void 0===F?void 0:F.topicImg)||"https://thumbs.dreamstime.com/b/letter-block-word-topic-wood-background-business-concept-170764857.jpg",className:"h-[300px] object-cover w-full",alt:""})}),(0,h.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,h.jsx)("div",{className:"flex flex-row justify-between items-center",children:(0,h.jsx)("span",{className:"text-2xl font-medium text-gray-700",children:"Topic descriptions"})}),(null===F||void 0===F?void 0:F.description)&&(0,h.jsx)("span",{className:"px-2 text-justify",children:null===F||void 0===F?void 0:F.description})]}),(0,h.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,h.jsx)("div",{className:"flex flex-row justify-between items-center",children:(0,h.jsx)("span",{className:"text-2xl font-medium text-gray-700",children:"Skills"})}),(0,h.jsx)("div",{className:"flex flex-col gap-1",children:z.map((function(e,t){return(0,h.jsx)(b,{val:e,getTopicOfClass:ae,isParent:n,studentInfo:Z},e.id+t)}))})]})]}):(0,h.jsxs)("div",{className:"w-full h-full flex flex-col gap-5 items-center justify-center",children:[(0,h.jsx)("img",{src:p,alt:"",className:"h-[300px]"}),(0,h.jsx)("span",{className:"text-2xl font-[500] text-primary",children:"No content, choose 1 topic to view"})]})}),(0,h.jsx)(d.Z,{isOpen:te})]})}},1009:function(){},4432:function(){},4676:function(){},8661:function(e,n,t){e.exports=t.p+"static/media/nocontent.374bbc0b49b8a06692ff.png"}}]);
//# sourceMappingURL=165.9f48c013.chunk.js.map