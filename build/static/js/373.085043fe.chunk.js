"use strict";(self.webpackChunktemplate_react_app=self.webpackChunktemplate_react_app||[]).push([[373],{4453:function(e,t,a){var n=a(1413),r=a(5987),s=(a(2791),a(184)),l=["children","className"];t.Z=function(e){var t=e.children,a=e.className,o=void 0===a?"":a,c=(0,r.Z)(e,l);return(0,s.jsx)("button",(0,n.Z)((0,n.Z)({className:"bg-primary py-2 px-5 rounded-lg border-2 text-white transition-all active:scale-90 cursor-pointer select-none hover:bg-opacity-90 text-center border-none ".concat(o," ")},c),{},{children:t}))}},2048:function(e,t,a){var n=a(1413),r=a(4165),s=a(5861),l=a(885),o=a(2791),c=a(3264),i=a.n(c),u=a(7948),d=a.n(u),p=a(4453),f=a(1134),x=a(4255),m=a(9085),h=(a(5462),a(1833)),v=a(3458),g=a(1756),b=a(4212),j=a(184),w=(0,b.Z)(),N={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}};t.Z=function(e){var t=e.isOpen,a=e.setIsOpen,c=e.edit,u=e.getClassOfTeacher,b=e.classInfo,k=e.setClassInfo,Z=(0,f.cI)(),y=Z.register,C=Z.handleSubmit,I=(0,o.useState)(!1),S=(0,l.Z)(I,2),T=S[0],_=S[1],O=(0,o.useState)([]),E=(0,l.Z)(O,2),L=E[0],A=E[1],R=o.useState([]),U=(0,l.Z)(R,2),z=U[0],F=U[1],P=(0,o.useState)(),B=(0,l.Z)(P,2),D=B[0],V=B[1],Y=function(e){return(0,m.Am)(e)},q=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(n){var s,l,o,i,d,p,f,x;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c||!b){e.next=27;break}if(e.t1=(null===z||void 0===z?void 0:z.length)&&(null===(s=z[0])||void 0===s?void 0:s.file),!e.t1){e.next=7;break}return e.next=6,w.post(v.T+"file/image",{image:(null===z||void 0===z?void 0:z.length)&&(null===(l=z[0])||void 0===l?void 0:l.file)},{headers:{"Content-Type":"multipart/form-data"}});case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0={data:b.classImg};case 10:return o=e.t0,i={className:n.className,classImg:o.data||""},e.prev=12,e.next=15,w.put(v.T+"class/".concat(b.id),i);case 15:Y("Updated success"),e.next=21;break;case 18:e.prev=18,e.t2=e.catch(12),Y("Update failed");case 21:return e.next=23,w.get(v.T+"class/".concat(b.id,"}"));case 23:d=e.sent,k(d.data),e.next=41;break;case 27:return e.next=29,w.post(v.T+"file/image",{image:(null===z||void 0===z?void 0:z.length)&&(null===(p=z[0])||void 0===p?void 0:p.file)},{headers:{"Content-Type":"multipart/form-data"}});case 29:return f=e.sent,x={className:n.className,classImg:f.data||"",year:"".concat((new Date).getFullYear(),"-").concat((new Date).getFullYear()+1),gradeId:D},e.prev=31,e.next=34,w.post(v.T+"class",x);case 34:Y("Created success"),e.next=40;break;case 37:e.prev=37,e.t3=e.catch(31),Y("Create failed");case 40:u();case 41:a(!t),e.next=48;break;case 44:e.prev=44,e.t4=e.catch(0),console.log(e.t4),401===e.t4.response.status&&_(!0);case 48:case"end":return e.stop()}}),e,null,[[0,44],[12,18],[31,37]])})));return function(t){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){w.get(v.T+"grade").then((function(e){A(e.data)}))}),[]),(0,o.useEffect)((function(){F([{data_url:null===b||void 0===b?void 0:b.classImg}])}),[b]);return(0,j.jsxs)(d(),{isOpen:t,style:N,shouldCloseOnOverlayClick:!0,contentLabel:"Example Modal",ariaHideApp:!1,children:[(0,j.jsxs)("div",{className:"flex flex-col w-[500px] h-fit gap-5",children:[(0,j.jsxs)("span",{className:"text-2xl",children:[c?"Edit":"Create"," class"]}),(0,j.jsxs)("form",{className:"flex flex-col gap-5",onSubmit:C(q),children:[(0,j.jsxs)("div",{className:"flex flex-col gap-2 px-2 w-full",children:[(0,j.jsx)("span",{className:"px-2",children:"Class name"}),(0,j.jsx)("input",(0,n.Z)((0,n.Z)({defaultValue:null===b||void 0===b?void 0:b.className,type:"text"},y("className",{required:!0})),{},{placeholder:"Type in class name",className:"outline-none px-3 py-1 border-b-2  border-opacity-0 transition-all focus:border-primary"}))]}),c?(0,j.jsx)(j.Fragment,{}):(0,j.jsxs)("div",{className:"flex flex-col gap-2 px-2",children:[(0,j.jsx)("span",{className:"px-2",children:"Grade"}),(0,j.jsx)(x.ZP,{defaultValue:D,options:L,type:"text",placeholder:"Pick a grade",onChange:function(e){return V(e.id)},className:"min-w-[332px] bg-gray",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.gradeName}})]}),(0,j.jsx)(i(),{value:z,onChange:function(e){F(e)},dataURLKey:"data_url",children:function(e){var t,a=e.imageList,r=e.onImageUpload,s=e.onImageUpdate,l=e.dragProps;return(0,j.jsx)("div",(0,n.Z)((0,n.Z)({className:"flex items-center justify-center w-full",onClick:null!==a&&void 0!==a&&a.length?function(){return s(0)}:r},l),{},{children:(0,j.jsxs)("div",{className:"relative rounded-lg min-h-[100px] w-[80%] overflow-hidden flex items-center justify-center bg-center select-none cursor-pointer transition-all",children:[(0,j.jsx)("img",{src:(null===a||void 0===a?void 0:a.length)&&(null===(t=a[0])||void 0===t?void 0:t.data_url)||h,className:"h-[200px] w-full",alt:""}),(0,j.jsx)("label",{className:"absolute z-1 w-full text-transparent hover:text-white hover:bg-gray-800 flex justify-center items-center hover:bg-opacity-50 transition-all min-h-[300px] cursor-pointer",htmlFor:"image",children:(0,j.jsx)("span",{className:"text-2xl",children:"Pick an image"})})]})}))}}),(0,j.jsxs)("div",{className:"w-full flex flex-row-reverse gap-5",children:[(0,j.jsx)(p.Z,{onClick:function(){return a(!t)},children:"Cancel"}),(0,j.jsx)(p.Z,{type:"submit",children:c?"Save":"Create"})]})]})]}),(0,j.jsx)(g.Z,{isOpen:T})]})}},1756:function(e,t,a){var n=a(4165),r=a(5861),s=(a(2791),a(7948)),l=a.n(s),o=a(7689),c=a(3458),i=a(4212),u=a(4453),d=a(184);(0,i.Z)();t.Z=function(e){var t=e.isOpen,a=(0,o.s0)(),s=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.delete(c.T+"account/logout");case 3:localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),a("/"),window.location.reload(),e.next=16;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),a("/"),window.location.reload();case 16:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(l(),{isOpen:t,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}},contentLabel:"Example Modal",ariaHideApp:!1,children:(0,d.jsxs)("div",{className:"flex flex-col gap-4 w-[500px]",children:[(0,d.jsx)("span",{className:"text-2xl font-medium",children:"Session Expired"}),(0,d.jsx)("span",{children:"Your session has expired please login again, click the button bellow to go back login screen"}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsx)(u.Z,{onClick:s,className:"w-[50%]",children:"Login"})})]})})}},6739:function(e,t,a){a(2791);var n=a(4238),r=a(7689),s=a(1833),l=a(184);t.Z=function(e){var t,a=e.classInfo,o=(0,r.s0)(),c=s;return console.log(a),(0,l.jsxs)(n.E.div,{animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},transition:{duration:.3},layout:!0,className:"flex flex-col gap-2 bg-white shadow-lg hover:shadow-xl duration-300 w-[250px] h-[200px] rounded-lg",onClick:function(){o("/class/".concat(a.id))},children:[(0,l.jsx)("div",{className:"flex justify-center pt-5",children:(0,l.jsx)("img",{src:(null===a||void 0===a?void 0:a.classImg)||c,onError:function(e){var t=e.currentTarget;t.onerror=null,t.src=c},alt:"",className:"rounded-md w-[200px] h-[100px] cursor-pointer object-cover"})}),(0,l.jsx)("div",{className:"flex flex-col ml-6 mr-5",children:(0,l.jsx)("span",{className:"font-[500] text-primary text-lg cursor-pointer truncate",children:null===a||void 0===a?void 0:a.className})}),(0,l.jsxs)("div",{className:"flex flex-row justify-between mt-1 items-center mx-6",children:[(0,l.jsx)("span",{className:"text-xs text-gray-500 no-underline cursor-default",children:null===a||void 0===a?void 0:a.year}),(0,l.jsxs)("span",{className:"text-xs no-underline cursor-default",children:["Grade:"," ",(0,l.jsx)("span",{className:"text-primary",children:null===a||void 0===a||null===(t=a.grade)||void 0===t?void 0:t.gradeName})]})]})]})}},3458:function(e,t,a){a.d(t,{T:function(){return n}});var n="http://localhost:8080/api/"},4212:function(e,t,a){var n=a(4165),r=a(5861),s=a(4569),l=a.n(s),o=a(456),c=a(7689),i=a(3458),u=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("refresh_token"),e.next=4,l().post(i.T+"account/refresh-token",{},{headers:{Authorization:"Bearer ".concat(t)}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();t.Z=function(){var e=l().create();return e.interceptors.request.use(function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a,r,s;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.getItem("access_token"))){e.next=19;break}if(r=(0,o.Z)(a),e.prev=3,!(r.exp<Date.now()/1e3)){e.next=13;break}return e.next=7,u();case 7:s=e.sent,localStorage.setItem("access_token",s.accessToken),localStorage.setItem("refresh_token",s.refreshToken),t.headers.Authorization="Bearer "+s.accessToken,e.next=14;break;case 13:t.headers.Authorization="Bearer "+a;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log(e),(0,c.s0)()("/")})),e}},1373:function(e,t,a){a.r(t);var n=a(4165),r=a(5861),s=a(885),l=a(2791),o=a(6739),c=a(3458),i=a(4453),u=a(2048),d=a(4212),p=a(184),f=(0,d.Z)();t.default=function(){var e=(0,l.useState)(""),t=(0,s.Z)(e,2),a=t[0],d=t[1],x=(0,l.useState)(!1),m=(0,s.Z)(x,2),h=m[0],v=m[1],g=(0,l.useState)([]),b=(0,s.Z)(g,2),j=b[0],w=b[1],N=(0,l.useCallback)((0,r.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.get(c.T+"class/teacher");case 2:t=e.sent,w(t.data);case 4:case"end":return e.stop()}}),e)}))),[]);return(0,l.useEffect)((function(){N()}),[N]),(0,p.jsx)("div",{className:"flex flex-col mt-10 gap-5 h-[100%]",children:(0,p.jsxs)("div",{className:"flex flex-col px-10 ml-7 pt-2",children:[(0,p.jsxs)("div",{className:"flex flex-row justify-between items-center mr-[4.2rem]",children:[(0,p.jsx)("span",{className:"text-2xl font-[500]",children:"Active Class"}),(0,p.jsxs)("div",{className:"flex flex-row gap-5 items-center",children:[(0,p.jsx)(i.Z,{onClick:function(){v(!0)},className:"shadow-lg",children:"Create a class"}),(0,p.jsx)(u.Z,{isOpen:h,setIsOpen:v,getClassOfTeacher:N}),(0,p.jsx)("input",{placeholder:"Search...",className:"flex justify-center shadow-md focus:shadow-lg items-center pr-10 transition-all px-5 py-2 rounded-md outline-none",onChange:function(e){d(e.target.value)}})]})]}),(0,p.jsx)("div",{className:"flex flex-row flex-wrap mt-5 gap-10 mb-10",children:null===j||void 0===j?void 0:j.filter((function(e){return""===a||e.className.toLowerCase().includes(a.toLowerCase())?e:""})).map((function(e,t){return(0,p.jsx)(o.Z,{layout:!0,classInfo:e},null===e||void 0===e?void 0:e.id)}))})]})})}},1833:function(e,t,a){e.exports=a.p+"static/media/classroom-background.4920a7bce675f9685560.jpg"}}]);
//# sourceMappingURL=373.085043fe.chunk.js.map