"use strict";(self.webpackChunktemplate_react_app=self.webpackChunktemplate_react_app||[]).push([[876],{4453:function(e,t,a){var n=a(1413),r=a(5987),o=(a(2791),a(184)),s=["children","className"];t.Z=function(e){var t=e.children,a=e.className,c=void 0===a?"":a,l=(0,r.Z)(e,s);return(0,o.jsx)("button",(0,n.Z)((0,n.Z)({className:"bg-primary py-2 px-5 rounded-lg border-2 text-white transition-all active:scale-90 cursor-pointer select-none hover:bg-opacity-90 text-center border-none ".concat(c," ")},l),{},{children:t}))}},1756:function(e,t,a){var n=a(4165),r=a(5861),o=(a(2791),a(7948)),s=a.n(o),c=a(7689),l=a(3458),i=a(4212),u=a(4453),d=a(184),p=(0,i.Z)();t.Z=function(e){var t=e.isOpen,a=(0,c.s0)(),o=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.delete(l.T5+"account/logout");case 3:localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),a("/"),window.location.reload(),e.next=16;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),a("/"),window.location.reload();case 16:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(s(),{isOpen:t,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(165, 165, 165, 0.6)"},content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",border:"none",borderRadius:"8px"}},contentLabel:"Example Modal",ariaHideApp:!1,children:(0,d.jsxs)("div",{className:"flex flex-col gap-4 w-[500px]",children:[(0,d.jsx)("span",{className:"text-2xl font-medium",children:"Session Expired"}),(0,d.jsx)("span",{children:"Your session has expired please login again, click the button bellow to go back login screen"}),(0,d.jsx)("div",{className:"flex justify-center",children:(0,d.jsx)(u.Z,{onClick:o,className:"w-[50%]",children:"Login"})})]})})}},4212:function(e,t,a){var n=a(4165),r=a(5861),o=a(4569),s=a.n(o),c=a(456),l=a(7689),i=a(3458),u=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=localStorage.getItem("refresh_token"),e.next=4,s().post(i.T5+"account/refresh-token",{},{headers:{Authorization:"Bearer ".concat(t)}});case 4:return a=e.sent,e.abrupt("return",a.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();t.Z=function(){var e=s().create();return e.interceptors.request.use(function(){var e=(0,r.Z)((0,n.Z)().mark((function e(t){var a,r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=localStorage.getItem("access_token"))){e.next=19;break}if(r=(0,c.Z)(a),e.prev=3,!(r.exp<Date.now()/1e3)){e.next=13;break}return e.next=7,u();case 7:o=e.sent,localStorage.setItem("access_token",o.accessToken),localStorage.setItem("refresh_token",o.refreshToken),t.headers.Authorization="Bearer "+o.accessToken,e.next=14;break;case 13:t.headers.Authorization="Bearer "+a;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log(e.t0);case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),(function(e){console.log(e),(0,l.s0)()("/")})),e}},3876:function(e,t,a){a.r(t);var n=a(1413),r=a(4165),o=a(5861),s=a(885),c=a(2791),l=a(4453),i=(a(3443),a(7160)),u=a(4255),d=a(2426),p=a.n(d),f=a(3264),x=a.n(f),m=a(9085),v=(a(5462),a(3458)),h=a(4212),g=a(1756),b=a(184),w=(0,h.Z)(),k=[{value:!1,label:"Male"},{value:!0,label:"Female"}];t.default=function(){var e=function(e){return(0,m.Am)(e)},t=(0,c.useRef)(null),a=(0,c.useState)(!1),d=(0,s.Z)(a,2),f=d[0],h=d[1],Z=(0,c.useState)(""),y=(0,s.Z)(Z,2),j=y[0],N=y[1],S=(0,c.useState)(!1),_=(0,s.Z)(S,2),C=_[0],I=_[1],O=(0,c.useState)([]),T=(0,s.Z)(O,2),B=T[0],z=T[1],A=(0,c.useState)(),L=(0,s.Z)(A,2),U=L[0],E=L[1],R=(0,c.useState)(""),P=(0,s.Z)(R,2),q=P[0],D=P[1],H=(0,c.useState)(null),M=(0,s.Z)(H,2),F=M[0],G=M[1],K=(0,c.useState)(0),V=(0,s.Z)(K,2),W=V[0],Y=V[1],J=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,a,n,o,s,c,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get(v.T5+"account/profile");case 3:l=e.sent,G({day:p()(null===(t=l.data)||void 0===t?void 0:t.dateOfBirth).date(),month:p()(null===(a=l.data)||void 0===a?void 0:a.dateOfBirth).month()+1,year:p()(null===(n=l.data)||void 0===n?void 0:n.dateOfBirth).year()}),N(null===(o=l.data)||void 0===o?void 0:o.fullName),Y(k.find((function(e){var t;return e.value===(null===(t=l.data)||void 0===t?void 0:t.gender)}))),E(null===(s=l.data)||void 0===s?void 0:s.account.avatarImg),D(null===(c=l.data)||void 0===c?void 0:c.account.role.role),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0),401===e.t0.response.status&&h(!0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(){var a,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t1=(null===B||void 0===B?void 0:B.length)&&(null===(a=B[0])||void 0===a?void 0:a.file),!t.t1){t.next=6;break}return t.next=5,w.post(v.T5+"file/image",{image:B[0].file},{headers:{"Content-Type":"multipart/form-data"}});case 5:t.t1=t.sent;case 6:if(t.t0=t.t1,t.t0){t.next=9;break}t.t0={data:""};case 9:return n=t.t0,t.prev=10,t.next=13,w.put(v.T5+"account/profile",{fullName:j,dateOfBirth:F?"".concat(F.year,"/").concat(F.month,"/").concat(F.day):"",gender:null===W||void 0===W?void 0:W.value,avatarImg:n.data||""});case 13:J(),e("Updated success"),t.next=20;break;case 17:t.prev=17,t.t2=t.catch(10),e("Update failed");case 20:t.next=26;break;case 22:t.prev=22,t.t3=t.catch(0),console.log(t.t3),401===t.t3.response.status&&h(!0);case 26:case"end":return t.stop()}}),t,null,[[0,22],[10,17]])})));return function(){return t.apply(this,arguments)}}();(0,c.useEffect)((function(){J()}),[]),(0,c.useEffect)((function(){z([{data_url:U}])}),[U]);return(0,b.jsxs)("div",{className:"px-20 py-10 flex flex-col bg-white h-screen gap-7 items-center",children:[(0,b.jsx)(x(),{value:B,onChange:function(e){z(e)},dataURLKey:"data_url",children:function(e){var t,a=e.imageList,r=e.onImageUpload,o=e.onImageUpdate,s=e.dragProps;return(0,b.jsxs)("div",(0,n.Z)((0,n.Z)({className:"relative flex flex-col",onClick:null!==a&&void 0!==a&&a.length?function(){return o(0)}:r},s),{},{children:[(0,b.jsx)("img",{src:(null===a||void 0===a?void 0:a.length)&&(null===(t=a[0])||void 0===t?void 0:t.data_url)||"https://img.freepik.com/premium-vector/students-classroom-teacher-near-blackboard-auditorium-teaches-maths-lesson-children-study-subject-kids-group-studying-elementary-primary-school-class-interior-cartoon-vector-flat-concept_176411-2393.jpg?w=2000",className:"w-[200px] h-[200px] rounded-full border-4 border-white shadow-2xl mb-5",alt:""}),(0,b.jsx)("div",{className:"absolute z-1 w-full select-none flex items-center hover:text-white text-transparent justify-center rounded-full cursor-pointer transition-all hover:bg-gray-500 hover:bg-opacity-90 min-h-[200px]",children:(0,b.jsx)("span",{children:"Change image"})})]}))}}),(0,b.jsxs)("div",{className:"flex flex-row gap-5 items-center",children:[(0,b.jsx)("input",{ref:t,defaultValue:j,size:null===j||void 0===j?void 0:j.length,onChange:function(e){return N(e.target.value)},className:"text-2xl text-center active:w-auto min-w-full resize-x font-medium max-w-[600px] text-primary outline-none px-2 transition-all border-b-2 py-2 ".concat(C?" border-primary ":"border-transparent"," "),readOnly:!C,maxLength:30}),(0,b.jsx)("i",{onClick:function(){return t.current.focus(),void I(!C)},className:"fa-regular fa-pen-to-square mb-1 cursor-pointer text-primary font-medium text-xl select-none active:scale-90"})]}),(0,b.jsx)("span",{className:"bg-green-500 rounded-xl text-white px-10 py-2",children:q}),(0,b.jsxs)("div",{className:"w-fit font-[500] text-gray-500 flex flex-col gap-7 ml-5",children:[(0,b.jsxs)("div",{className:"flex flex-row gap-5 items-center w-[400px]",children:[(0,b.jsxs)("span",{className:"flex items-center gap-5 w-[50%]",children:[(0,b.jsx)("i",{className:"fa-solid fa-cake-candles ml-1 mr-1"})," Date of birth"]}),(0,b.jsx)(i.ZP,{value:F,onChange:G,renderInput:function(e){var t=e.ref;return(0,b.jsx)("input",{readOnly:!0,ref:t,value:F?"".concat(F.day,"/").concat(F.month,"/").concat(F.year):"",placeholder:"Select a date",className:"text-center outline-none border-b-2 py-1 focus:border-primary  cursor-pointer"})},shouldHighlightWeekends:!0})]}),(0,b.jsxs)("div",{className:"flex flex-row items-center w-full",children:[(0,b.jsxs)("span",{className:"flex items-center gap-5 w-[50%]",children:[(0,b.jsx)("i",{className:"fa-solid fa-venus-mars"})," Gender"]}),(0,b.jsx)(u.ZP,{className:"w-[50%]",value:W,onChange:Y,options:k})]})]}),(0,b.jsx)("div",{className:"flex flex-row-reverse w-[40%]",children:(0,b.jsx)(l.Z,{onClick:Q,className:"shadow-lg",children:"Save"})}),(0,b.jsx)(g.Z,{isOpen:f})]})}},3443:function(){}}]);
//# sourceMappingURL=876.ad684fc6.chunk.js.map